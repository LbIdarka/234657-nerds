function init(){myMap=new ymaps.Map("map",{center:[59.939217855632,30.320243544952387],zoom:17},{searchControlProvider:"yandex#search"}),myPlacemark=new ymaps.Placemark([59.93863106417265,30.3230545],{},{iconLayout:"default#image",iconImageHref:"img/point-map.png",iconImageSize:[231,190],iconImageOffset:[-60,-200]}),myMap.geoObjects.add(myPlacemark)}var link=document.querySelector(".button"),popup=document.querySelector(".container-post"),close=document.querySelector(".container-post-close"),introduce=popup.querySelector("[name=name-post]"),form=popup.querySelector("form"),letter=popup.querySelector("[name=email-post]"),storage=localStorage.getItem("letter");link.addEventListener("click",function(a){a.preventDefault(),popup.classList.add("container-post-show"),storage&&(letter.value=storage),introduce.focus()}),close.addEventListener("click",function(a){a.preventDefault(),popup.classList.remove("container-post-show"),popup.classList.remove("container-post-error")}),form.addEventListener("submit",function(){introduce.value&&letter.value?localStorage.setItem("letter",letter.value):(event.preventDefault(),popup.classList.remove("container-post-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("container-post-error"))}),window.addEventListener("keydown",function(a){27===a.keyCode&&popup.classList.contains("container-post-show")&&(popup.classList.remove("container-post-show"),popup.classList.remove("container-post-error"))});var myMap,myPlacemark;ymaps.ready(init);
